package _04_è®¡æ•°è´¨æ•°

// æš´åŠ›2048ms 1.9mb
func countPrimes(n int) int {
	count := 0
	for i := 0; i < n; i++ {
		if isPrime(i) {
			count++
		}
	}
	return count
}

// i*i < nå¾ˆå…³é”®, å¯¹ç†è§£åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•æœ‰å¸®åŠ©
// 12 = 2 * 6
// 12 = 3 * 4
// 12 = sqrt(12) * sqrt(12)
// 12 = 4 * 3
// 12 = 6 * 2
// ä¹Ÿå°±æ˜¯: å¦‚æžœåœ¨[2, sqrt(n)]åŒºé—´æ²¡æœ‰å‘çŽ°å¯æ•´é™¤å› å­ï¼Œå°±å¯ä»¥ç›´æŽ¥æ–­å®šnæ˜¯è´¨æ•°, [sqrt(n), n]åŒºé—´æ²¡æœ‰ä»·å€¼äº†
func isPrime(n int) bool {
	if n <= 1 {
		return false
	}
	for i := 2; i*i <= n; i++ {
		if n%i == 0 {
			return false
		}
	}
	return true
}

// åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•: å…ˆå°†2ï½žnçš„å„ä¸ªæ•°æ”¾å…¥è¡¨ä¸­
// 1.åœ¨2çš„ä¸Šé¢ç”»ä¸€ä¸ªåœˆ, ç„¶åŽåˆ’åŽ»2çš„å…¶ä»–å€æ•°
// 2.ç¬¬ä¸€ä¸ªæ—¢æ²¡æœ‰ç”»åœˆæœ‰æ²¡æœ‰è¢«ç­›åŽ»çš„æ•°æ˜¯3
// 3.åœ¨3çš„ä¸Šé¢ç”»ä¸€ä¸ªåœˆ, ç„¶åŽåˆ’åŒº3çš„å…¶ä»–å€æ•°
// 4.ç¬¬ä¸€ä¸ªæ—¢æ²¡æœ‰ç”»åœˆåˆæ²¡æœ‰è¢«ç­›åŽ»çš„æ•°æ˜¯5
// 5.ç±»æŽ¨, ä¸€ç›´åˆ°æ‰€æœ‰å°äºŽç­‰äºŽnçš„æ•°éƒ½ç”»åœˆ/åˆ’åŽ»
func countPrimes1(n int) int {
	count := 0
	// ä¸€å¼€å§‹æ•°ç»„åŽŸå§‹å…¨æ˜¯false, ä»£è¡¨æ²¡æœ‰è¢«ç­›åŽ»
	statusArr := make([]bool, n)

	for i := 2; i < n; i++ {
		// è¢«ç­›åŽ»äº†å°±ç»™ðŸ‘´çˆ¬
		if statusArr[i] {
			continue
		}
		// å¼€å§‹ç­›! ä»Ži*iå¼€å§‹æ˜¯ä¸€ä¸ªä¼˜åŒ–ç‚¹
		for j := i * i; j < n; j += i {
			statusArr[j] = true
		}
		count++
	}
	return count
}
